var y=Object.defineProperty;var v=(s,e,t)=>e in s?y(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>v(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();class c extends Phaser.Physics.Arcade.Sprite{constructor(e,t,i,a,r,n,x,d,S){super(e,t,i,a,r),e.add.existing(this),e.physics.add.existing(this),this.colorVariant=a,this.anims.play(`${this.colorVariant}-idle`,!0),this.setScale(S),this._speed=n??Phaser.Math.Between(50,150),this._attackSpeed=x??1e3,this._hp=d??3,this._maxHp=this._hp,this.healthBar=e.add.graphics(),this.drawHealthBar(),this.attackCooldown=!1,this.isKnockedBack=!1}set speed(e){this._speed=e}set attackSpeed(e){this._attackSpeed=e}set hp(e){this._hp=e}drawHealthBar(){this.healthBar.clear(),this.healthBar.fillStyle(16711680),this.healthBar.fillRect(this.x-10,this.y-45,30,5),this.healthBar.fillStyle(65280),this.healthBar.fillRect(this.x-10,this.y-45,30*(this._hp/this._maxHp),5)}updateHealthBarPosition(){this.healthBar.clear(),this.drawHealthBar()}preUpdate(e,t){super.preUpdate(e,t),this.updateHealthBarPosition()}static createAnimations(e){["opp","opp-blue","opp-green","opp-grey","opp-orange"].forEach(i=>{e.anims.create({key:`${i}-idle`,frames:e.anims.generateFrameNames(i,{start:0,end:0}),frameRate:5,repeat:-1}),e.anims.create({key:`${i}-run`,frames:e.anims.generateFrameNames(i,{start:9,end:12}),frameRate:10,repeat:-1}),e.anims.create({key:`${i}-atk`,frames:e.anims.generateFrameNames(i,{start:1,end:8}),frameRate:10})})}handleAttack(){this.attackCooldown||(this.scene.sound.play("woosh",{volume:1.5}),this.setVelocity(0,0),this.anims.play(`${this.colorVariant}-atk`,!0),this.attackCooldown=!0,this.scene.time.delayedCall(this._attackSpeed,()=>{console.log("Cooldown reset"),this.attackCooldown=!1}))}takeDamage(e){if(!this.isKnockedBack)if(this._hp-=1,this.drawHealthBar(),console.log(`Opponent HP: ${this._hp}`),this._hp<=0)this.healthBar.destroy(),this.destroy();else{this.isKnockedBack=!0;const t=10;this.setVelocity(e.x*t,e.y*t),this.setTint(16711680),this.scene.time.delayedCall(250,()=>{this.setTint(16777215),this.setVelocity(0,0),this.isKnockedBack=!1})}}moveTowardPlayer(e){if(this.isKnockedBack)return;if(this.attackCooldown){this.setVelocity(0,0);return}const t=e.x-this.x,i=e.y-this.y,a=Math.sqrt(t*t+i*i);if(a===0)return;const r=t/a,n=i/a;this.setVelocity(r*this._speed,n*this._speed),r<0?this.flipX=!0:this.flipX=!1,this.anims.currentAnim.key!=="opp-run"&&this.anims.play(`${this.colorVariant}-run`,!0)}}class p extends c{constructor(e,t,i){const a=["opp","opp-blue","opp-green","opp-grey","opp-orange"];Phaser.Math.RND.seed=Date.now();const r=Phaser.Utils.Array.GetRandom(a);super(e,t,i,r,null,40,2e3,3,3)}}class m extends c{constructor(e,t,i){const a=["opp","opp-blue","opp-green","opp-grey","opp-orange"];Phaser.Math.RND.seed=Date.now();const r=Phaser.Utils.Array.GetRandom(a);super(e,t,i,r,null,60,1500,4,3.5)}}class b extends c{constructor(e,t,i){super(e,t,i,"opp",null,70,2500,7,4)}}class h extends c{constructor(e,t,i){super(e,t,i,"opp",null,100,1500,7,3)}}const l={Idle:"IDLE",Damage:"DAMAGE",Dead:"DEAD"};let o=null;class k extends Phaser.Physics.Arcade.Sprite{constructor(t,i,a,r,n){super(t,i,a,r,n);u(this,"healthState",l.Idle);u(this,"damageTime",0);u(this,"_health",7);u(this,"attackCooldown",!1);u(this,"defenseCooldown",!1);t.add.existing(this),t.physics.add.existing(this),this.anims.play("idle",!0),this.setScale(3)}get health(){return this._health}static createAnimations(t){t.anims.create({key:"idle",frames:t.anims.generateFrameNumbers("player",{start:0,end:3}),frameRate:4,repeat:-1}),t.anims.create({key:"right",frames:t.anims.generateFrameNumbers("player",{start:4,end:7}),frameRate:10,repeat:-1}),t.anims.create({key:"attack",frames:t.anims.generateFrameNumbers("player",{start:8,end:13}),frameRate:10}),t.anims.create({key:"defend",frames:t.anims.generateFrameNumbers("player",{start:14,end:14}),frameRate:1,repeat:-1}),t.anims.create({key:"faint",frames:t.anims.generateFrameNumbers("player",{start:15,end:22}),frameRate:10})}handleAttack(){if(this.attackCooldown)return;this.scene.sound.play("woosh",{volume:1}),this.attacking=!0,this.anims.play("attack",!0),console.log("attack");let t=null,i=200;if(this.scene.opps.children.iterate(a=>{const r=Phaser.Math.Distance.Between(this.x,this.y,a.x,a.y);r<i&&(i=r,t=a)}),t){console.log("Attack landed on enemy!");const a=t.x-this.x,r=t.y-this.y,n=new Phaser.Math.Vector2(a,r).normalize();t.takeDamage(n)}else console.log("No enemy in range.");this.attackCooldown=!0,this.scene.time.delayedCall(500,()=>{this.attackCooldown=!1}),this.once("animationcomplete",()=>{this.attacking=!1})}handleDamage(t){if(this._health<=0||this.healthState===l.Dead||this.healthState===l.Damage)return;if(this.scene.input.activePointer.rightButtonDown()&&!this.defendCooldown){this.scene.sound.play("clash",{volume:.25}),console.log("Defense successful! No damage taken."),this.defendCooldown=!0,this.scene.time.delayedCall(4e3,()=>{this.defendCooldown=!1});return}const i=.8;this.setVelocity(t.x*i,t.y*i),this.setTint(16711680),this.healthState=l.Damage,--this._health,this.scene.time.delayedCall(250,()=>{this.setVelocity(0,0),this._health>0&&(this.healthState=l.Idle),this.setTint(16777215)}),console.log(this._health),this._health<=0&&(console.log("BEFORE: healthState =",this.healthState),this.setVelocity(0,0),this.healthState=l.Dead,console.log("AFTER: healthState =",this.healthState),this.anims.play("faint"))}walkingSound(t){t==="start"&&!o&&(o=this.scene.sound.add("gravel",{loop:!0,volume:.1,rate:3}),o.play()),t==="stop"&&o&&o.isPlaying&&(o.stop(),o=null)}update(t,i,a){if(this.healthState===l.Dead){this.setVelocity(0,0);return}this.healthState===l.Damage||this.attacking||(this.setVelocity(0,0),t.left.isDown||a.left.isDown?(this.setVelocityX(-160),this.anims.play("right",!0),this.flipX=!0):t.right.isDown||a.right.isDown?(this.setVelocityX(160),this.anims.play("right",!0),this.flipX=!1):t.up.isDown||a.up.isDown?(this.setVelocityY(-160),this.anims.play("right",!0)):(t.down.isDown||a.down.isDown)&&(this.setVelocityY(160),this.anims.play("right",!0)),this.body.velocity.x==0&&this.body.velocity.y==0?(this.anims.play("idle",!0),this.walkingSound("stop")):this.walkingSound("start"),i.rightButtonDown()?(this.setVelocity(0,0),this.anims.play("defend",!0)):i.leftButtonDown()&&(this.setVelocity(0,0),this.handleAttack()))}}const g=new Phaser.Events.EventEmitter;Phaser.GameObjects.GameObjectFactory.register("player",function(s,e,t,i){const a=new k(this.scene,s,e,t,i);return this.scene.add.existing(a),this.scene.physics.add.existing(a),a});class f extends Phaser.Scene{constructor(e){super(e)}preload(){this.load.image("arena","assets/arena2.png"),this.load.spritesheet("player","assets/PlayerAnims.png",{frameWidth:42,frameHeight:42}),this.load.spritesheet("opp","assets/opp.png",{frameWidth:42,frameHeight:42}),this.load.spritesheet("opp-green","assets/opp-green.png",{frameWidth:42,frameHeight:42}),this.load.spritesheet("opp-blue","assets/opp-blue.png",{frameWidth:42,frameHeight:42}),this.load.spritesheet("opp-grey","assets/opp-grey.png",{frameWidth:42,frameHeight:42}),this.load.spritesheet("opp-orange","assets/opp-orange.png",{frameWidth:42,frameHeight:42}),this.load.image("ui-heart-empty","assets/heartEmpty.png"),this.load.image("ui-heart-full","assets/heartFull.png"),this.load.image("ui-heart-half","assets/heartHalf.png"),console.log("k")}create(){this.scene.run("game-ui"),this.cursors=this.input.keyboard.createCursorKeys(),this.pointer=this.input.activePointer,this.wasd=this.input.keyboard.addKeys({up:Phaser.Input.Keyboard.KeyCodes.W,left:Phaser.Input.Keyboard.KeyCodes.A,down:Phaser.Input.Keyboard.KeyCodes.S,right:Phaser.Input.Keyboard.KeyCodes.D});let e=this.add.sprite(0,0,"arena");e.setOrigin(0,0),e.setScale(.9),console.log(e),k.createAnimations(this),c.createAnimations(this),this.player=this.add.player(300,300,"player"),this.physics.add.existing(this.player),this.player.setCollideWorldBounds(!0),this.cameras.main.startFollow(this.player,!0),this.opps=this.physics.add.group(),this.handlePlayerOppCollision=(t,i)=>{if(i.attackCooldown)return;const a=t.x-i.x,r=t.y-i.y,n=new Phaser.Math.Vector2(a,r).normalize().scale(300);t.handleDamage(n),i.handleAttack(),g.emit("player-health-changed",this.player.health)},this.physics.add.collider(this.player,this.opps,this.handlePlayerOppCollision,void 0,this)}update(){this.player&&(this.player.update(this.cursors,this.pointer,this.wasd),this.restrictToCircle(this.player,530,500,400)),this.opps.children.iterate(e=>{e.moveTowardPlayer(this.player),this.restrictToCircle(e,400,400,400)})}restrictToCircle(e,t,i,a){const r=e.x-t,n=e.y-i;if(Math.sqrt(r*r+n*n)>a){const d=Math.atan2(n,r);e.x=t+Math.cos(d)*a,e.y=i+Math.sin(d)*a}}}class D{constructor(e){this.scene=e,this.isActive=!1,this.currentStep=0,this.tutorialSteps=[{text:"Ține click-dreapta apăsat ca să aperi!",condition:()=>this.checkRightClickHeld(1e3),duration:0},{text:"Bun! Acum atacă cu click-stânga!",condition:()=>this.scene.input.activePointer.leftButtonDown(),duration:0},{text:"Folosește săgețile sau w,a,s,d ca să te deplasezi!",condition:()=>this.scene.cursors.left.isDown||this.scene.cursors.right.isDown||this.scene.cursors.up.isDown||this.scene.cursors.down.isDown||this.scene.wasd.left.isDown||this.scene.wasd.right.isDown||this.scene.wasd.up.isDown||this.scene.wasd.down.isDown,duration:0},{text:"Bravo! Acum, învinge armata inamică! Când ești pregătit, lovește (click-stânga).",condition:()=>this.scene.input.activePointer.leftButtonDown(),duration:0}],this.createOverlay()}checkRightClickHeld(e){return this.scene.input.activePointer.rightButtonDown()?(this.rightClickStartTime||(this.rightClickStartTime=this.scene.time.now),this.scene.time.now-this.rightClickStartTime>=e):(this.rightClickStartTime=null,!1)}createOverlay(){this.overlay=this.scene.add.rectangle(-300,-100,this.scene.scale.width,this.scene.scale.height,0,.6).setOrigin(0,0).setDepth(100).setVisible(!1),this.tutorialUI=this.scene.add.container(0,0).setDepth(200).setScrollFactor(0),this.tipIcon=this.scene.add.image(50,30,"tip").setOrigin(0,0).setScale(.5).setVisible(!1),this.scene.textures.get("tip").setFilter(Phaser.Textures.FilterMode.LINEAR),this.tipBox=this.scene.add.image(250,60,"tipBox").setOrigin(0,0).setScale(.8).setVisible(!1),this.tipText=this.scene.add.text(this.tipBox.x+this.tipBox.displayWidth/2+16,this.tipBox.y+this.tipBox.displayHeight/2,"",{fontFamily:"'IM Fell English SC', serif",fontSize:"26px",fill:"#302d2a",align:"center",wordWrap:{width:this.tipBox.displayWidth-70}}).setOrigin(.5,.5).setDepth(102).setVisible(!1),this.tutorialUI.add([this.tipIcon,this.tipBox,this.tipText])}startTutorial(){this.isActive||(this.isActive=!0,this.scene.physics.pause(),this.overlay.setVisible(!0),this.tipIcon.setVisible(!0),this.tipBox.setVisible(!0),this.tipText.setVisible(!0),this.runStep())}runStep(){if(this.currentStep>=this.tutorialSteps.length){this.endTutorial();return}let e=this.tutorialSteps[this.currentStep];this.tipText.setText(e.text),this.waitForCondition(e.condition)}waitForCondition(e){let t=this.scene.time.addEvent({delay:100,callback:()=>{e()&&(t.remove(),this.currentStep++,this.runStep())},loop:!0})}endTutorial(){this.isActive=!1,this.scene.physics.resume(),this.overlay.setVisible(!1),this.tipIcon.setVisible(!1),this.tipBox.setVisible(!1),this.tipText.setVisible(!1)}}class w extends Phaser.Scene{constructor(){super({key:"DialogueScene"}),this.dialogueData=[],this.actTitleActive=!0}init(e){this.dialogueData=e.dialogue||[],this.backgroundKey=e.background||null,this.sceneKey=e.nextScene||null,this.actTitle=e.actTitle||"",this.actTitleActive=!0}preload(){this.load.image("samurai","assets/samurai_determined.png"),this.load.image("evil_samurai","assets/evilsamurai.png"),this.load.image("woman","assets/woman.png"),this.load.image("diplomat","assets/diplomat.png"),this.load.image("general","assets/diplomat.png"),this.load.image("rain_bg","assets/rain.png"),this.load.image("councilroom","assets/meijiDebate.png"),this.load.image("rebellion","assets/revolta.png"),this.load.image("inside_house","assets/interior.jpg"),this.load.image("garden","assets/gradina.jpg"),this.load.image("councilroom_kagoshima","assets/council.png"),this.load.image("war_prep","assets/PregatireRazboi.jpg"),this.load.image("night","assets/noapte.jpg"),this.load.image("shiroyama","assets/ShiroyamaBattle.jpg"),this.load.image("dialogueBox","assets/dialogue.png"),this.load.image("cutscene1","assets/cutscene1.jpg"),this.load.image("cutscene2","assets/cutscene2.PNG"),this.load.image("statue","assets/statue.png"),this.load.image("edoArt","assets/castleEdo.jpg"),this.add.text(0,0,"",{fontFamily:"'IM Fell English SC', serif"}).setVisible(!1)}create(){if(this.cursors=this.input.keyboard.createCursorKeys(),this.pointer=this.input.activePointer,this.backgroundKey){let e=this.add.image(this.cameras.main.centerX,this.cameras.main.centerY,this.backgroundKey).setOrigin(.5,.5).setDepth(0),t=Math.max(1200/e.width,800/e.height);e.setScale(t)}this.actBackground=this.add.rectangle(600,400,1200,800,0).setDepth(200),this.actText=this.add.text(600,400,this.actTitle,{fontFamily:"'IM Fell English SC', serif",fontSize:"48px",fontStyle:"bold",color:"#ffffff"}).setOrigin(.5).setDepth(201),this.dialogueBox=this.add.image(600,700,"dialogueBox").setOrigin(.5,.5).setDepth(100).setScale(1.1),this.dialogueText=this.add.text(600,720,"",{fontFamily:"'IM Fell English SC', serif",fontSize:"28px",color:"#302d2a",wordWrap:{width:650}}).setOrigin(.5).setDepth(101),this.speakerText=this.add.text(600,660,"",{fontFamily:"'IM Fell English SC', serif",fontSize:"36px",fontStyle:"bold",color:"#302d2a",padding:{left:10,right:10,top:5,bottom:5}}).setOrigin(.5).setDepth(102),this.leftCharacter=this.add.image(200,600,"").setOrigin(.5).setScale(1).setVisible(!1),this.rightCharacter=this.add.image(1e3,600,"").setOrigin(.5).setScale(1).setVisible(!1),this.dialogueIndex=0,this.time.delayedCall(3500,()=>{this.tweens.add({targets:[this.actText,this.actBackground],alpha:0,duration:1500,onComplete:()=>{this.actText.destroy(),this.actBackground.destroy(),this.actTitleActive=!1}})}),this.showNextDialogue(),this.input.on("pointerdown",()=>{this.actTitleActive||this.showNextDialogue()}),this.input.keyboard.on("keydown-SPACE",()=>{this.actTitleActive||this.showNextDialogue()}),this.backspaceKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.BACKSPACE),this.backspaceKey.on("down",()=>{this.dialogueIndex>=2&&(this.dialogueIndex-=2,this.showNextDialogue())})}showNextDialogue(){if(this.dialogueIndex>=this.dialogueData.length){this.transitionTo();return}this.dialogueIndex>0&&this.sound.play("dialogueClick",{volume:.3});let{speaker:e,side:t,text:i}=this.dialogueData[this.dialogueIndex];this.sceneKey==="DialogueScene13"||this.sceneKey==="FinalBattleScene"||this.sceneKey==="DialogueScene12"||this.sceneKey==="DialogueScene1"||this.sceneKey==="MainMenu"||this.leftCharacter.setTexture("samurai").setVisible(!0),e==="samurai"&&this.speakerText.setText("Saigō Takamori"),e==="diplomat"&&this.speakerText.setText("Diplomat imperial"),e==="evil_samurai"&&this.speakerText.setText("Samurai"),e==="woman"&&this.speakerText.setText("Soția lui Saigō Takamori"),e==="general"&&this.speakerText.setText("General Imperial"),this.speakerText.setColor("#000000"),this.dialogueText.setText(i),t==="left"||t==="left_hidden"?(e==="samurai"&&this.speakerText.setColor("#8B0000"),this.speakerText.setX(300),this.speakerText.setOrigin(0,.5),this.dialogueText.setX(300),this.dialogueText.setOrigin(0,.5),this.dialogueText.setAlign("left")):t==="right"||t==="right_hidden"?(this.speakerText.setX(920),this.speakerText.setOrigin(1,.5),this.dialogueText.setX(920),this.dialogueText.setOrigin(1,.5),this.dialogueText.setAlign("right")):this.dialogueText.setY(700),t==="left"?(this.leftCharacter.setFlipX(e!=="samurai"),this.leftCharacter.setTexture(e).setVisible(!0)):t==="right"&&this.rightCharacter.setTexture(e).setVisible(!0),this.dialogueIndex++}transitionTo(){this.cameras.main.fadeOut(300,0,0,0),this.time.delayedCall(300,()=>{this.scene.start(this.sceneKey)})}}class T extends Phaser.Scene{constructor(){super({key:"DialogueScene2"})}create(){let e=[{speaker:"samurai",side:"left",text:"Cum îndrăzniți să atacați Kyoto?"},{speaker:"samurai",side:"left",text:"Drumul vostru se oprește aici!"},{speaker:"samurai",side:"left",text:"De la început am știut că ceva nu este în regulă cu capitularea shogunului."},{speaker:"samurai",side:"left",text:"Acțiunile voastre au început un război civil."},{speaker:"samurai",side:"left",text:"Și luptați de partea greșită!"},{speaker:"evil_samurai",side:"right",text:"Tu și întreaga voastră provincie Satsuma sunteți ridicoli!"},{speaker:"evil_samurai",side:"right",text:"Crezi că aveți vreo șansă împotriva noastră?"},{speaker:"evil_samurai",side:"right",text:"Suntem 15.000, iar voi sunteți de trei ori mai puțini decât noi!"},{speaker:"samurai",side:"left",text:"Dar suntem de trei ori mai pregătiți."},{speaker:"samurai",side:"left",text:"Satsuma nu va cădea în fața voastră!"},{speaker:"samurai",side:"left",text:"Am fost instruiți de armata franceză, iar trupele noastre sunt echipate cu armament modern, nu doar cu săbii."},{speaker:"samurai",side:"left",text:"Și, din câte observ, nu pare ca v-ați așteptat să vă blocăm calea."},{speaker:"evil_samurai",side:"right",text:"Ajunge cu vorbele!"},{speaker:"evil_samurai",side:"right",text:"Dacă nu ne lăsați să trecem, vom pătrunde cu forța!"},{speaker:"evil_samurai",side:"right",text:"Atacați!"}];this.scene.start("DialogueScene",{dialogue:e,background:"night",nextScene:"TutorialScene",actTitle:"Bătălia de la Toba-Fushimi"})}}class _ extends f{constructor(){super({key:"TutorialScene"}),this.enemySpawned1=!1,this.enemySpawned2=!1,this.bossSpawned=!1,this.stageFinished=!1}preload(){super.preload(),this.load.image("tip","assets/tip.png"),this.load.image("tipBox","assets/tipBox.png"),this.load.image("bg","assets/meijiRain.jpg"),this.load.spritesheet("buttons","assets/buttonUI.png",{frameWidth:16,frameHeight:16})}create(){this.sound.stopAll(),this.music=this.sound.add("music_battle",{volume:.12}),this.music.setLoop(!0),this.music.play(),this.enemySpawned1=!1,this.enemySpawned2=!1,this.bossSpawned=!1,this.stageFinished=!1;let e=this.add.sprite(this.cameras.main.centerX,this.cameras.main.centerY,"bg");e.setDepth(0),e.setScrollFactor(0),e.setOrigin(.5,.5),e.setScale(2),console.log("Current active scene:",this.scene.key),super.create(),this.tutorialManager=new D(this),this.tutorialManager.startTutorial(),this.physics.add.collider(this.player,this.opps,()=>{this.tutorialManager.isActive})}update(){super.update(),this.player._health<=0&&this.showRestartScreen(),!this.tutorialManager.isActive&&!this.enemySpawned1&&(console.log("Tutorial complete! Spawning enemy..."),this.tutorialEnemy=new p(this,600,300),this.opps.add(this.tutorialEnemy),this.enemySpawned1=!0),this.enemySpawned1&&!this.enemySpawned2&&this.tutorialEnemy._hp<=0&&(this.tutorialEnemy2=new p(this,600,300),this.opps.add(this.tutorialEnemy2),this.tutorialEnemy3=new p(this,400,600),this.opps.add(this.tutorialEnemy3),this.enemySpawned2=!0),!this.bossSpawned&&this.enemySpawned2&&this.tutorialEnemy3._hp<=0&&this.tutorialEnemy2._hp<=0&&(this.tutorialBoss=new m(this,600,300),this.opps.add(this.tutorialBoss),this.bossSpawned=!0),this.bossSpawned&&this.tutorialBoss._hp<=0&&!this.stageFinished&&(this.stageFinished=!0,this.onStageFinished())}onStageFinished(){this.time.delayedCall(2e3,()=>{this.congratsScreen()})}nextStage(){this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(500,()=>{this.scene.start("DialogueScene3")})}congratsScreen(){this.overlay=this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,16777215,.6).setOrigin(.5,.5).setDepth(100).setScrollFactor(0),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,"Misiune îndeplinită cu succes!",{fontSize:"48px",color:"#000000",fontFamily:"'IM Fell English SC', serif",align:"center",wordWrap:{width:this.cameras.main.width*.8}}).setOrigin(.5,.5).setScrollFactor(0).setDepth(101),this.time.delayedCall(3e3,()=>{this.nextStage()})}showRestartScreen(){this.player.walkingSound("stop"),this.overlay=this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,0,.6).setOrigin(.5,.5).setDepth(100).setScrollFactor(0),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-100,"Stage Failed",{fontSize:"48px",color:"#FFFFFF",fontFamily:"'IM Fell English SC', serif",align:"center"}).setOrigin(.5,.5).setScrollFactor(0).setDepth(101);let e=this.add.sprite(this.cameras.main.centerX,this.cameras.main.centerY+50,"buttons",3).setScale(5).setOrigin(.5,.5).setDepth(101).setScrollFactor(0).setInteractive();e.on("pointerdown",()=>{this.scene.restart()}),e.on("pointerover",()=>{e.setScale(6).setDepth(102)}),e.on("pointerout",()=>{e.setScale(5).setDepth(101)})}}class C extends f{constructor(){super({key:"FinalBattleScene"}),this.enemySpawned1=!1,this.enemySpawned2=!1,this.bossSpawned=!1,this.stageFinished=!1,this.transitioningToNext=!1}preload(){super.preload(),this.load.image("tip","assets/tip.png"),this.load.image("tipBox","assets/tipBox.png"),this.load.image("bgFinalBattle","assets/ShiroyamaBattle.jpg"),this.load.spritesheet("buttons","assets/buttonUI.png",{frameWidth:16,frameHeight:16})}create(){this.sound.stopAll(),this.music=this.sound.add("music_battle",{volume:.12}),this.music.setLoop(!0),this.music.play(),this.enemySpawned1=!1,this.enemySpawned2=!1,this.bossSpawned=!1,this.stageFinished=!1;let e=this.add.sprite(this.cameras.main.centerX,this.cameras.main.centerY,"bgFinalBattle");e.setDepth(0),e.setScrollFactor(0),e.setOrigin(.5,.5),e.setScale(2),console.log("Current active scene:",this.scene.key),super.create()}update(){super.update(),this.player._health<=0&&!this.stageFinished?this.showRestartScreen():this.stageFinished&&this.onStageFinished(),this.enemySpawned1||(this.enemy1=new m(this,600,300),this.opps.add(this.enemy1),this.enemy2=new m(this,700,400),this.opps.add(this.enemy2),this.enemySpawned1=!0),this.enemySpawned1&&!this.enemySpawned2&&this.enemy1._hp<=0&&this.enemy2._hp<=0&&(this.enemy3=new b(this,500,500),this.opps.add(this.enemy3),this.enemySpawned2=!0),!this.bossSpawned&&this.enemySpawned2&&this.enemy3._hp<=0&&(this.boss=new h(this,400,300),this.boss2=new h(this,650,450),this.boss3=new h(this,500,600),this.boss4=new h(this,650,750),this.opps.add(this.boss),this.opps.add(this.boss2),this.opps.add(this.boss3),this.opps.add(this.boss4),this.bossSpawned=!0,this.stageFinished=!0)}onStageFinished(){this.transitioningToNext||(this.transitioningToNext=!0,this.time.delayedCall(1e3,()=>{this.nextStage()}))}nextStage(){this.cameras.main.fadeOut(1e3,0,0,0),this.cameras.main.once("camerafadeoutcomplete",()=>{this.scene.start("DialogueScene11")})}showRestartScreen(){this.player.walkingSound("stop"),this.overlay=this.add.rectangle(this.cameras.main.centerX,this.cameras.main.centerY,this.cameras.main.width,this.cameras.main.height,0,.6).setOrigin(.5,.5).setDepth(100).setScrollFactor(0),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY-100,"Stage Failed",{fontSize:"48px",color:"#FFFFFF",fontFamily:"'IM Fell English SC', serif",align:"center"}).setOrigin(.5,.5).setScrollFactor(0).setDepth(101);let e=this.add.sprite(this.cameras.main.centerX,this.cameras.main.centerY+50,"buttons",3).setScale(5).setOrigin(.5,.5).setDepth(101).setScrollFactor(0).setInteractive();e.on("pointerdown",()=>{this.scene.restart()}),e.on("pointerover",()=>{e.setScale(6).setDepth(102)}),e.on("pointerout",()=>{e.setScale(5).setDepth(101)})}}class F extends Phaser.Scene{constructor(){super({key:"game-ui"})}create(){this.hearts=this.add.group({classType:Phaser.GameObjects.Image}),this.hearts.createMultiple({key:"ui-heart-full",setXY:{x:30,y:760,stepX:48},quantity:7}),this.hearts.children.iterate(e=>{e.setScale(4),e.setOrigin(0,1)}),g.on("player-health-changed",this.handlePlayerHealthChange,this),this.events.on(Phaser.Scenes.Events.SHUTDOWN,()=>{g.off("player-health-changed",this.handlePlayerHealthChange,this)})}handlePlayerHealthChange(e){this.hearts.children.each((t,i)=>{const a=t;i<e?a.setTexture("ui-heart-full"):a.setTexture("ui-heart-empty")})}}class P extends Phaser.Scene{constructor(){super({key:"DialogueScene13"})}create(){this.sound.stopAll(),this.sound.play("harakiri");let e=[{speaker:"",side:"",text:"La treizeci de ani după moartea sa, Saigō Takamori a fost onorat cu o statuie."},{speaker:"",side:"",text:"Deși guvernul l-a considerat un trădător, poporul Japoniei l-a recunoscut pentru cine era cu adevărat:"},{speaker:"",side:"",text:"Un erou."},{speaker:"",side:"",text:"Aceasta se află astăzi în inima orașului Tokyo, în Parcul Ueno."},{speaker:"",side:"",text:"Statuia nu îl înfățișează ca pe un războinic, ci ca pe un om simplu, cu o demnitate tăcută, ce reflectă valorile și onoarea sa."},{speaker:"",side:"",text:"El este Saigō Takamori."},{speaker:"",side:"",text:"Ultimul samurai, prins între trecut și viitor."},{speaker:"",side:"",text:"Saigō Takamori (1828 – 1877)"},{speaker:"",side:"",text:"Onoarea lui trăiește în istorie."}];this.scene.start("DialogueScene",{dialogue:e,background:"statue",nextScene:"MainMenu",actTitle:"Moștenirea lui Saigō Takamori"})}}class B extends Phaser.Scene{constructor(){super({key:"DialogueScene12"})}create(){let e=[{speaker:"samurai",side:"left_hidden",text:"Aceasta este sabia care m-a însoțit în nenumărate războaie..."},{speaker:"samurai",side:"left_hidden",text:"Această sabie mi-a definit viața și tot ea va fi cea care mi-o va lua."},{speaker:"samurai",side:"left_hidden",text:"Meiji a câștigat, dar oare Japonia va mai păstra amintirea celor care s-au jertfit pentru ea?"},{speaker:"samurai",side:"left_hidden",text:"Poate că nu."},{speaker:"samurai",side:"left_hidden",text:"Dar onoarea... onoare va dăinui, atâta timp cât există oameni care își amintesc."}];this.scene.start("DialogueScene",{dialogue:e,background:"cutscene2",nextScene:"DialogueScene13",actTitle:""})}}class A extends Phaser.Scene{constructor(){super({key:"DialogueScene11"})}create(){let e=[{speaker:"general",side:"right_hidden",text:"Renunță, Saigō. Nu mai ai nimic!"},{speaker:"general",side:"right_hidden",text:"Rebeliunea Satsuma se încheie acum!"},{speaker:"general",side:"right_hidden",text:"Ești încolțit, nu mai ai nicio cale de ieșire!"},{speaker:"samurai",side:"left_hidden",text:"Greșești… Chiar și în moarte, onoarea unui samurai adevărat dăinuie."},{speaker:"samurai",side:"left_hidden",text:"Onoarea este tot ce mi-a rămas -"},{speaker:"samurai",side:"left_hidden",text:"Și este singurul lucru pe care nu-l veți putea lua niciodată."},{speaker:"general",side:"right_hidden",text:"Și totuși, moartea nu-ți va aduce victoria."},{speaker:"general",side:"right_hidden",text:"E doar un final tăcut, fără glorie."},{speaker:"samurai",side:"left_hidden",text:"Nu pentru un samurai."},{speaker:"samurai",side:"left_hidden",text:"Harakiri... o moarte prin propria sabie."},{speaker:"samurai",side:"left_hidden",text:"Este ultima noastră dovadă de curaj și loialitate."},{speaker:"samurai",side:"left_hidden",text:"Mai bine o moarte cu onoare decât o viață în rușine."},{speaker:"general",side:"right_hidden",text:"Cum îndrăznești?"},{speaker:"general",side:"right_hidden",text:"Ești un nebun!"},{speaker:"general",side:"right_hidden",text:"Vino ca prizonier și plătește pentru tot ce ai făcut."},{speaker:"general",side:"right_hidden",text:"Răspunde pentru trădare și umilință, și dacă vei coopera, poate vei trăi până la execuția ta."},{speaker:"samurai",side:"left_hidden",text:"Prea târziu. N-o să-mi scrieți voi sfârșitul."}];this.scene.start("DialogueScene",{dialogue:e,background:"cutscene1",nextScene:"DialogueScene12",actTitle:""})}}class z extends Phaser.Scene{constructor(){super({key:"DialogueScene10"})}create(){let e=[{speaker:"evil_samurai",side:"left",text:"Au ajuns… Armata imperială e aici!"},{speaker:"general",side:"right",text:"Dacă ni-l predați pe Saigō, poate că vă vom cruța viețile."},{speaker:"general",side:"right",text:"Altfel, sunteți cu toții condamnați pentru această revoltă!"},{speaker:"evil_samurai",side:"left",text:"Niciodată!"},{speaker:"evil_samurai",side:"left",text:"Poate că voi ați uitat ce înseamnă onoarea unui samurai, dar noi nu vom ceda niciodată!"},{speaker:"evil_samurai",side:"left",text:"Luptăm unul pentru toți și toți pentru unul!"},{speaker:"general",side:"right",text:"Fie!"},{speaker:"general",side:"right",text:"V-ați ales singuri soarta…"},{speaker:"general",side:"right",text:"Atacați!"}];this.scene.start("DialogueScene",{dialogue:e,background:"shiroyama",nextScene:"FinalBattleScene",actTitle:"Confruntarea finală"})}}class O extends Phaser.Scene{constructor(){super({key:"DialogueScene9"})}create(){let e=[{speaker:"samurai",side:"left",text:"În sfârșit… aproape am ajuns în Kagoshima."},{speaker:"samurai",side:"left",text:"Haideți să facem un popas aici, pe dealul Shiroyama."},{speaker:"samurai",side:"left",text:"Câți am mai rămas?"},{speaker:"evil_samurai",side:"right",text:"Doar 500, Saigō…"},{speaker:"evil_samurai",side:"right",text:"Dar ți-am spus, vom rămâne loiali până la capăt."},{speaker:"evil_samurai",side:"right",text:"Satsuma nu se predă ușor..."},{speaker:"samurai",side:"left",text:"Privește… în depărtare se văd forțele imperiale."},{speaker:"samurai",side:"left",text:"Ne vor ajunge din urmă în curând."},{speaker:"samurai",side:"left",text:"Par să fie… cel puțin 30.000."},{speaker:"samurai",side:"left",text:"Suntem înconjurați."},{speaker:"samurai",side:"left",text:"Nu mai are sens să fugim."},{speaker:"evil_samurai",side:"right",text:"Și atunci, ce ordine ne dai?"},{speaker:"samurai",side:"left",text:"Ne luptăm."},{speaker:"samurai",side:"left",text:"Până la ultimul om."},{speaker:"samurai",side:"left",text:"Moartea ne așteaptă, dar onoarea ne va supraviețui."},{speaker:"evil_samurai",side:"right",text:"Așa să fie!"}];this.scene.start("DialogueScene",{dialogue:e,background:"shiroyama",nextScene:"DialogueScene10",actTitle:"Bătălia de la Shiroyama"})}}class N extends Phaser.Scene{constructor(){super({key:"DialogueScene8"})}create(){let e=[{speaker:"evil_samurai",side:"right",text:"Saigō! Castelul Kumamoto a contraatacat în toiul nopții…"},{speaker:"evil_samurai",side:"right",text:"Ne-au luat complet prin surprindere."},{speaker:"evil_samurai",side:"right",text:"Au reușit să pătrundă până la garnizoană."},{speaker:"evil_samurai",side:"right",text:"Asediul e practic pierdut."},{speaker:"samurai",side:"left",text:"Ce vești avem de la samuraii trimiși la Tabarazuka?"},{speaker:"samurai",side:"left",text:"Ei ce au raportat?"},{speaker:"evil_samurai",side:"right",text:"Au numărat peste 90.000 de soldați imperiali."},{speaker:"evil_samurai",side:"right",text:"Ploaia torențială le-a distrus puștile, au fost forțați să lupte cu săbiile."},{speaker:"evil_samurai",side:"right",text:"N-au avut nicio șansă."},{speaker:"evil_samurai",side:"right",text:"Au fost zdrobiți…"},{speaker:"evil_samurai",side:"right",text:"Și acum cei ce au rămas se retrag în grabă."},{speaker:"samurai",side:"left",text:"Asta înseamnă că armata imperială vine direct spre noi."},{speaker:"samurai",side:"left",text:"Nu mai avem timp."},{speaker:"samurai",side:"left",text:"Trebuie să retragem toate forțele de la Kumamoto chiar acum."},{speaker:"samurai",side:"left",text:"Nu are rost să mai sacrificăm oameni fără motiv."},{speaker:"evil_samurai",side:"right",text:"Și unde să mergem?"},{speaker:"samurai",side:"left",text:"Ne întoarcem la Kagoshima."},{speaker:"samurai",side:"left",text:"Acolo vom decide ce urmează."},{speaker:"samurai",side:"left",text:"Doar acolo mai avem un avantaj."}];this.scene.start("DialogueScene",{dialogue:e,background:"rain_bg",nextScene:"DialogueScene9",actTitle:"Încheierea asediului de la Kumamoto"})}}class E extends Phaser.Scene{constructor(){super({key:"DialogueScene7"})}create(){this.scene.stop("game-ui");let e=[{speaker:"samurai",side:"left",text:"Cum evoluează atacul asupra Castelului Kumamoto?"},{speaker:"evil_samurai",side:"right",text:"Saigō, nu cred că vom reuși să-l cucerim."},{speaker:"evil_samurai",side:"right",text:"Până acum l-am ținut sub asediu, așa cum ai ordonat, dar nu pare că vom reuși mai mult de-atât."},{speaker:"samurai",side:"left",text:"Va trebui să ne mulțumim cu asta, cel puțin pentru moment."},{speaker:"samurai",side:"left",text:"Le-am subestimat apărarea..."},{speaker:"samurai",side:"left",text:"Ar fi trebuit să fie o victorie ușoară."},{speaker:"samurai",side:"left",text:"Nu-mi dau seama cum vom mai ajunge la Tokyo în ritmul ăsta."},{speaker:"samurai",side:"left",text:"Kumamoto este abia la jumatatea drumului."},{speaker:"evil_samurai",side:"right",text:"Și acum? Ce facem?"},{speaker:"evil_samurai",side:"right",text:"Imperiul a trimis deja întăriri."},{speaker:"evil_samurai",side:"right",text:"Soldații noștri nu-i mai pot ține pe loc… "},{speaker:"evil_samurai",side:"right",text:"Nu mai durează mult până ajung aici, la Kumamoto, și atunci ofensiva noastră va fi complet înăbușită."},{speaker:"samurai",side:"left",text:"Dacă luăm în calcul samuraii care ni s-au alăturat de la începutul atacului, avem în jur de 20.000 de oameni."},{speaker:"samurai",side:"left",text:"Putem trimite 15.000 spre Tabarazuka, să intercepteze întăririle imperiale."},{speaker:"samurai",side:"left",text:"Ceilalți 5.000 vor rămâne aici, să mențină asediul asupra castelului."},{speaker:"samurai",side:"left",text:"Ar trebui să fie suficient."},{speaker:"evil_samurai",side:"right",text:"Situația e din ce în ce mai dificilă…"},{speaker:"evil_samurai",side:"right",text:"Cerul se închide, pare că vine ploaia."},{speaker:"evil_samurai",side:"right",text:"Dar este prea târziu să renunțăm acum."}];this.scene.start("DialogueScene",{dialogue:e,background:"war_prep",nextScene:"DialogueScene8",actTitle:"Atacul asupra Castelului Kumamoto"})}}class I extends Phaser.Scene{constructor(){super({key:"DialogueScene6"})}create(){let e=[{speaker:"samurai",side:"left",text:"Presupun că toată lumea a aflat deja ce a făcut guvernul imperial."},{speaker:"samurai",side:"left",text:"Trebuie să calculăm cu grijă pașii pe care îi vom face de acum înainte."},{speaker:"evil_samurai",side:"right",text:"Ce rost are să mai chibzuim?"},{speaker:"evil_samurai",side:"right",text:"E limpede ce trebuie făcut!"},{speaker:"evil_samurai",side:"right",text:"Dacă vor o revoltă, atunci haideți să le oferim una!"},{speaker:"samurai",side:"left",text:"Nu vă grăbiți."},{speaker:"samurai",side:"left",text:"Armata imperială nu e o glumă."},{speaker:"samurai",side:"left",text:"Am văzut-o cu ochii mei… și eu însumi am ajutat la formarea ei."},{speaker:"samurai",side:"left",text:"O confruntare directă ar fi aproape imposibil de câștigat."},{speaker:"evil_samurai",side:"right",text:"Nu te recunosc, Saigō!"},{speaker:"evil_samurai",side:"right",text:"Nu tu erai cel care spunea că un samurai adevărat nu întoarce privirea când onoarea îi este călcată în picioare?"},{speaker:"evil_samurai",side:"right",text:"Ne-au tăiat salariile, statutul social, ne-au lăsat fără nimic!"},{speaker:"evil_samurai",side:"right",text:"După o viață dedicată Japoniei, asta e răsplata?"},{speaker:"evil_samurai",side:"right",text:"Sărăcie și dispreț?"},{speaker:"evil_samurai",side:"right",text:"Și acum cuteză să vină și să ne confiște până și armele?"},{speaker:"samurai",side:"left",text:"Nu spun că e drept ceea ce fac…"},{speaker:"samurai",side:"left",text:"Dar o revoltă împotriva lor e un drum fără întoarcere."},{speaker:"samurai",side:"left",text:"Aproape sinucigaș."},{speaker:"samurai",side:"left",text:"Ne-am putea pierde totul - viața, familiile, viitorul…"},{speaker:"evil_samurai",side:"right",text:"Tocmai de aceea avem nevoie de tine."},{speaker:"evil_samurai",side:"right",text:"Fără tine, nu avem nicio șansă."},{speaker:"evil_samurai",side:"right",text:"Ai câștigat respectul tuturor din această sală."},{speaker:"evil_samurai",side:"right",text:"Dacă cineva ne poate aduce victoria, acela ești tu."},{speaker:"evil_samurai",side:"right",text:"Și știi bine că ți-am fi loiali până la moarte."},{speaker:"evil_samurai",side:"right",text:"Gândește-te, Saigō -"},{speaker:"evil_samurai",side:"right",text:"Gândește-te la cât de multe am putea face, nu doar pentru noi, ci pentru întreaga Japonie!"},{speaker:"samurai",side:"left",text:"Nu știu ce să spun..."},{speaker:"samurai",side:"left",text:" Dacă pornim pe drumul acesta, va fi nevoie de o pregătire cum Japonia n-a mai cunoscut vreodată."},{speaker:"evil_samurai",side:"right",text:"..."},{speaker:"samurai",side:"left",text:"Onoarea nu se negociază…"},{speaker:"samurai",side:"left",text:"Ne pregătim de război."}];this.scene.start("DialogueScene",{dialogue:e,background:"councilroom_kagoshima",nextScene:"DialogueScene7",actTitle:"Actul II: Rebeliunea Satsuma (1877)"})}}class M extends Phaser.Scene{constructor(){super({key:"DialogueScene5"})}create(){let e=[{speaker:"woman",side:"right",text:"Dragă, ai auzit știrile?"},{speaker:"samurai",side:"left",text:"Nu… Ce s-a întâmplat?"},{speaker:"woman",side:"right",text:"Guvernul a trimis o navă de război aici, în Kagoshima."},{speaker:"woman",side:"right",text:"Vor să ne confişte armele din arsenal."},{speaker:"woman",side:"right",text:"Se tem că veți porni o revoltă."},{speaker:"samurai",side:"left",text:"O revoltă?"},{speaker:"samurai",side:"left",text:"Tot ce am făcut de când m-am întors a fost să întemeiez Shi-gakkō, școala militară privată pentru samurai."},{speaker:"samurai",side:"left",text:"Nu am încălcat nicio lege!"},{speaker:"woman",side:"right",text:"Ei cred că școala este, de fapt, o organizație politică ostilă guvernului imperial."},{speaker:"woman",side:"right",text:"Și se spune că aceasta nu va fi singura navă trimisă."},{speaker:"woman",side:"right",text:"Trebuie să fii pregătit."},{speaker:"woman",side:"right",text:"Nu cred că se vor opri aici."},{speaker:"samurai",side:"left",text:"Trebuie să-i adun pe ceilalți lideri din Kagoshima."},{speaker:"samurai",side:"left",text:"Cei mai mulți sunt foști elevi ai Shi-gakkō."},{speaker:"samurai",side:"left",text:"Nu vor tolera faptul că guvernul ne tratează ca pe niște trădători."},{speaker:"woman",side:"right",text:"Te rog… ai grijă de tine. Nu vreau să te pierd."}];this.scene.start("DialogueScene",{dialogue:e,background:"inside_house",nextScene:"DialogueScene6",actTitle:"5 ani mai târziu, în Kagoshima..."})}}class K extends Phaser.Scene{constructor(){super({key:"DialogueScene4"})}create(){let e=[{speaker:"samurai",side:"left",text:"Trebuie să discutăm despre situația din Coreea."},{speaker:"samurai",side:"left",text:"Refuză să-l recunoască pe Împăratul Meiji ca lider legitim al Japoniei!"},{speaker:"samurai",side:"left",text:"Vă amintiți cum ne-au tratat emisarii atunci când am încercat să stabilim relații comerciale și diplomatice?"},{speaker:"samurai",side:"left",text:"Este inadmisibil cum ni se adresează."},{speaker:"diplomat",side:"right",text:"Și ce propui, Saigō?"},{speaker:"diplomat",side:"right",text:"Să pornim un război doar pentru o chestiune de onoare?"},{speaker:"samurai",side:"left",text:"Nu putem rămâne pasivi în fața unei asemenea insulte."},{speaker:"samurai",side:"left",text:"În plus, acum că shogunatul s-a destrămat,  mii de samurai au rămas fără rol în societate."},{speaker:"samurai",side:"left",text:"Un război e oportunitatea perfectă de a-i integra în noua Japonie -"},{speaker:"samurai",side:"left",text:"De a le oferi un scop înainte ca frustrarea lor să se întoarcă împotriva statului."},{speaker:"samurai",side:"left",text:"Vrei să-i lăsăm să piară în sărăcie?"},{speaker:"diplomat",side:"right",text:"Într-adevăr, samuraii ar putea deveni o amenințare pentru stabilitate..."},{speaker:"diplomat",side:"right",text:"Dar să nu uităm că și tu ești unul dintre ei, Saigō."},{speaker:"diplomat",side:"right",text:"Poziția ta nu este tocmai obiectivă."},{speaker:"samurai",side:"left",text:"Tocmai de aceea mă ofer să merg personal în Coreea, ca trimis special."},{speaker:"samurai",side:"left",text:"Dacă voi fi atacat, guvernul va avea un motiv clar și justificat pentru a acționa."},{speaker:"diplomat",side:"right",text:"Nu fi nechibzuit, Saigō."},{speaker:"diplomat",side:"right",text:"Ai dreptate, avem suficiente motive să fim nemulțumiți, dar orice intervenție militară ar fi prematură."},{speaker:"diplomat",side:"right",text:"Japonia este încă în plină modernizare, iar un război ar pune o povară mult prea mare pe umerii noștri."},{speaker:"samurai",side:"left",text:"Așadar, nu vom face nimic?"},{speaker:"samurai",side:"left",text:"Vom lăsa demnitatea Japoniei să fie călcată în picioare?"},{speaker:"samurai",side:"left",text:"Un samurai adevărat nu ignoră o astfel de ofensă!"},{speaker:"diplomat",side:"right",text:"Decizia a fost luată: nu vom interveni."},{speaker:"diplomat",side:"right",text:"Și, mai mult, îți interzicem să pleci în Coreea cu intenția de a provoca un conflict."},{speaker:"samurai",side:"left",text:"În acest caz, înseamnă că nu mai am ce căuta în acest guvern."},{speaker:"samurai",side:"left",text:"Nu pot face parte dintr-o conducere care a uitat ce înseamnă onoarea japoneză."},{speaker:"samurai",side:"left",text:"Îmi dau demisia."}];this.scene.start("DialogueScene",{dialogue:e,background:"councilroom",nextScene:"DialogueScene5",actTitle:"Birocrația Meiji"})}}class V extends Phaser.Scene{constructor(){super({key:"DialogueScene3"})}create(){this.scene.stop("game-ui"),this.sound.stopAll(),this.music=this.sound.add("music_default",{volume:.4}),this.music.setLoop(!0),this.music.play();let e=[{speaker:"samurai",side:"left",text:"Cum a putut shogunul să trimită soldați cu puștile goale pe front?"},{speaker:"samurai",side:"left",text:"Nu aveau nicio șansă împotriva noastră."},{speaker:"evil_samurai",side:"right",text:"Shogunul... a fugit."},{speaker:"evil_samurai",side:"right",text:"Toți liderii noștri s-au retras la Edo, ne-au abandonat în mijlocul bătăliei…"},{speaker:"evil_samurai",side:"right",text:"Am rămas fără conducători și fără resurse, nu mai avem nimic pentru care să luptăm."},{speaker:"samurai",side:"left",text:"Lupta nu s-a încheiat, iar voi veți putea să o continuați, atâta timp cât veți alege sa o faceți pentru împărat."},{speaker:"samurai",side:"left",text:"Interesul lui nu este de a se răzbuna pe voi."},{speaker:"samurai",side:"left",text:"Va începe o nouă eră în Japonia."},{speaker:"samurai",side:"left",text:"Și nu vom alunga străinii, cum v-a făcut Shogunul să credeți."},{speaker:"samurai",side:"left",text:"Împreună, putem construi un viitor bazat pe modernizare."},{speaker:"samurai",side:"left",text:"Dar nu vom lasa Occidentul să profite de noi, cum le-a permits shogunul."},{speaker:"evil_samurai",side:"right",text:"După tot ce s-a întâmplat… poate că nu o merităm, dar vă mulțumesc."},{speaker:"evil_samurai",side:"right",text:"E o șansă să ne răscumpărăm greșelile și să fim din nou de folos Japoniei."}];this.scene.start("DialogueScene",{dialogue:e,background:"night",nextScene:"DialogueScene4",actTitle:"După lupta de la Toba-Fushimi..."})}}class j extends Phaser.Scene{constructor(){super({key:"DialogueScene1"})}create(){let e=[{speaker:"samurai",side:"left",text:"Trebuie să acționăm."},{speaker:"samurai",side:"left",text:"După cum am prezis..."},{speaker:"samurai",side:"left",text:"Shogunul nu a acceptat să vină la Kyoto fără gărzi, ca să-și predea oficial puterea Împăratului."},{speaker:"samurai",side:"left",text:"Și acum că am anunțat decretul care îi va confisca terenurile și desființa poziția, își mobilizează armata!"},{speaker:"diplomat",side:"right",text:"Saigō-san… știm amândoi că shogunul Yoshinobu a cedat autoritatea."},{speaker:"diplomat",side:"right",text:"Nu putem fi siguri ca plănuiește un atac împotriva noastră."},{speaker:"diplomat",side:"right",text:"Putem construi o tranziție pașnică, cu sprijinul curții imperiale."},{speaker:"samurai",side:"left",text:"Cuvintele nu dizolvă puterea, diplomatule."},{speaker:"samurai",side:"left",text:"Shogunatul nu e doar un titlu - "},{speaker:"samurai",side:"left",text:"E o rețea de clanuri, funcționari și comandanți care controlează Japonia de peste două sute de ani."},{speaker:"samurai",side:"left",text:"Crezi că o simplă proclamație rostită la Kyoto îi va face să se retragă?"},{speaker:"diplomat",side:"right",text:"Shogunatul a oferit stabilitate până acum."},{speaker:"diplomat",side:"right",text:"Dacă ne pastram cumpătul, avem șansa de a evita un război între Imperiu și shogunat."},{speaker:"samurai",side:"left",text:"Stabilitate? Poate. Dar cu ce preț?"},{speaker:"samurai",side:"left",text:"Un împărat redus la o umbră, în timp ce adevărata putere trona la Edo."},{speaker:"samurai",side:"left",text:"E timpul ca Japonia să meargă înainte cu o armată unificată și o conducere legitimă, sub împărat."},{speaker:"diplomat",side:"right",text:"Și ce facem cu Yoshinobu? "},{speaker:"diplomat",side:"right",text:"Încă deține influență. Dar a dat înapoi."},{speaker:"diplomat",side:"right",text:"Să nu-l împingem în război…"},{speaker:"samurai",side:"left",text:"Predarea lui e o fațadă."},{speaker:"samurai",side:"left",text:"Înca deține armata, pământuri și alianțe."},{speaker:"samurai",side:"left",text:"I-am oferit șansa să vină la Kyoto fără gărzi. A refuzat."},{speaker:"samurai",side:"left",text:"Iar acum… își mobilizează trupele."},{speaker:"samurai",side:"left",text:"Ce altă dovadă mai vrei?"},{speaker:"diplomat",side:"right",text:"Nu vrem un război civil, Saigō-san."},{speaker:"diplomat",side:"right",text:"Nu vrem să distrugem țara în numele schimbării."},{speaker:"diplomat",side:"right",text:"Dacă forțăm schimbarea cu sabia, cu ce suntem mai buni decât ei?"},{speaker:"samurai",side:"left",text:"Pacea moare sub mâna corupției."},{speaker:"samurai",side:"left",text:"Nu poate exista câtă vreme umbrele shogunatului bântuie peste hotărârile împăratului."},{speaker:"samurai",side:"left",text:"O țară nu poate merge înainte dacă nu lasă în urmă ceea ce o ține pe loc."},{speaker:"samurai",side:"left",text:"Doar așa putem construi o țară demnă de viitorul care ne așteaptă."}];this.scene.start("DialogueScene",{dialogue:e,background:"councilroom",nextScene:"DialogueScene2",actTitle:"Actul I: Războiul Boshin (1868-1869)"})}}class R extends Phaser.Scene{constructor(){super({key:"DialogueScene0"})}create(){this.sound.stopAll(),this.music=this.sound.add("music_default",{volume:.4}),this.music.setLoop(!0),this.music.play();let e=[{speaker:"",side:"",text:"Până în anul 1868, Japonia fusese condusă timp de secole de shogunat, cu shogunul ca lider suprem, în timp ce împăratul avea doar un rol simbolic."},{speaker:"",side:"",text:"Deschiderea recentă a Japoniei către influențele occidentale, inițiată de shogunat, a dus la o criză economică."},{speaker:"",side:"",text:"Această situație a stârnit nemulțumirea mai multor nobili și tineri samurai, care au format o alianță împotriva shogunului."},{speaker:"",side:"",text:"Au preluat controlul curții imperiale și l-au convins pe împăratul Meiji să își revendice autoritatea."},{speaker:"",side:"",text:"În cele din urmă, shogunul Yoshinobu a proclamat ca va renunța la putere, sperând că va putea face parte din noul guvern."},{speaker:"",side:"",text:"Dar Saigō Takamori, un tânăr samurai, nu a fost convins de sinceritatea resemnării sale."}];this.scene.start("DialogueScene",{dialogue:e,background:"edoArt",nextScene:"DialogueScene1",actTitle:"Ultimul Samurai - Saigō Takamori"})}}class H extends Phaser.Scene{constructor(){super({key:"MainMenu"})}preload(){this.load.image("playButton","assets/dialogue.png"),this.load.image("biblioButton","assets/dialogue.png"),this.load.image("textBoxy","assets/dialogue.png"),this.load.image("bgMain","assets/statuePainting.jpg"),this.load.audio("music_default","assets/audio/tradJap.mp3"),this.load.audio("music_battle","assets/audio/warmusic.mp3"),this.load.audio("woosh","assets/audio/woosh.wav"),this.load.audio("clash","assets/audio/clash.wav"),this.load.audio("gravel","assets/audio/gravel.wav"),this.load.audio("dialogueClick","assets/audio/poate3.wav"),this.load.audio("harakiri","assets/audio/sword_slash.mp3")}create(){this.scene.stop("game-ui");let e=this.add.image(0,0,"bgMain").setDepth(100).setOrigin(0,0).setDepth(-1e3),t=Math.max(1200/e.width,800/e.height);e.setScale(t),e.setX(this.cameras.main.centerX-e.displayWidth/2),this.add.image(600,300,"playButton").setInteractive().setOrigin(.5).on("pointerdown",()=>this.transitionTo("DialogueScene0")),this.dialogueText=this.add.text(600,300,"Start",{fontFamily:"'IM Fell English SC', serif",fontSize:"45px",color:"#302d2a",wordWrap:{width:560}}).setOrigin(.5).setDepth(101),this.add.image(600,500,"biblioButton").setInteractive().setOrigin(.5).on("pointerdown",()=>{window.location.href="../bibliografie.html"}),this.dialogueText=this.add.text(600,500,"Bibliografie",{fontFamily:"'IM Fell English SC', serif",fontSize:"45px",color:"#302d2a",wordWrap:{width:560}}).setOrigin(.5).setDepth(101),this.cameras.main.fadeIn(500)}transitionTo(e){this.cameras.main.fadeOut(500,0,0,0),this.time.delayedCall(500,()=>{this.scene.start(e)})}}let X={type:Phaser.WEBGL,width:1200,height:800,render:{antialias:!1,pixelArt:!0},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[H,j,C,O,E,N,I,V,_,F,w,f,R,T,K,M,z,A,B,P]};new Phaser.Game(X);
